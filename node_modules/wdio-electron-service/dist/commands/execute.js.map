{"version":3,"file":"execute.js","sourceRoot":"","sources":["../../src/commands/execute.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,4BAA4B,EAAE,MAAM,iBAAiB,CAAC;AAG/D,MAAM,CAAC,KAAK,UAAU,OAAO,CAE3B,MAAgE,EAChE,GAAG,IAAoB;IAEvB;;OAEG;IACH,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE,CAAC;QAC/D,MAAM,IAAI,KAAK,CAAC,uDAAuD,CAAC,CAAC;IAC3E,CAAC;IAED,MAAM,OAAO,GAAG,IAAI,CAAC,OAA8B,CAAC;IACpD,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAC;IACzD,CAAC;IAED,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE,CAAC;QAC/B,OAAO,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;IACjC,CAAC;IAED,OAAO,OAAO,CAAC,OAAO,CACpB,SAAS,qBAAqB,CAAC,UAAU,EAAE,MAAM,EAAE,GAAG,IAAI;QACxD,IAAI,MAAM,CAAC,YAAY,KAAK,SAAS,EAAE,CAAC;YACtC,MAAM,IAAI,KAAK,CAAC,UAAU,CAAC,CAAC;QAC9B,CAAC;QACD,OAAO,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,MAAgB,EAAE,IAAI,CAAC,CAAC;IAC7D,CAAC,EACD,4BAA4B,EAC5B,GAAG,MAAM,EAAE,EACX,GAAG,IAAI,CACR,CAAC;AACJ,CAAC","sourcesContent":["import { CONTEXT_BRIDGE_NOT_AVAILABLE } from '../constants.js';\nimport type ElectronWorkerService from '../service.js';\n\nexport async function execute<ReturnValue, InnerArguments extends unknown[]>(\n  this: ElectronWorkerService,\n  script: string | ((...innerArgs: InnerArguments) => ReturnValue),\n  ...args: InnerArguments\n): Promise<ReturnValue> {\n  /**\n   * parameter check\n   */\n  if (typeof script !== 'string' && typeof script !== 'function') {\n    throw new Error('Expecting script to be type of \"string\" or \"function\"');\n  }\n\n  const browser = this.browser as WebdriverIO.Browser;\n  if (!browser) {\n    throw new Error('WDIO browser is not yet initialised');\n  }\n\n  if (typeof script === 'string') {\n    return browser.execute(script);\n  }\n\n  return browser.execute(\n    function executeWithinElectron(errMessage, script, ...args) {\n      if (window.wdioElectron === undefined) {\n        throw new Error(errMessage);\n      }\n      return window.wdioElectron.execute(script as string, args);\n    },\n    CONTEXT_BRIDGE_NOT_AVAILABLE,\n    `${script}`,\n    ...args,\n  );\n}\n"]}